{% extends "blog/base.html" %}
{% load static %}

{% block title %}{{ post.title }} - FatPyWeb{% endblock %}

{% block header_title %}{{ post.title }}{% endblock %}

{% block header_content %}
<nav>
    <ul>
        <!-- Navigation items if needed -->
    </ul>
</nav>
<div class="header-buttons">
    <a href="{% url 'post_list' %}">Return to posts</a>
</div>
{% endblock %}

{% block content %}
<div class="post">
    <h2>{{ post.title }}</h2>
    <p class="date">{{ post.created_at|date:"F j, Y" }}</p>
    <div class="post-content-frame">{{ post.content|safe }}</div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const postImages = document.querySelectorAll('.post-content-frame img');
        postImages.forEach(img => {
            img.classList.add('md-image-override');
            img.removeAttribute('width');
            img.removeAttribute('height');
            img.style.maxWidth = '100%';
            img.style.height = 'auto';
            
            // Handle image loading error
            img.addEventListener('error', function() {
                this.src = '{% static "img/image-placeholder.png" %}';
                this.alt = 'Image could not be loaded';
            });
        });
    });
</script>
{% endblock %}
